<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Facebook</title>
    <script src="https://kit.fontawesome.com/83cece50f1.js" crossorigin="anonymous"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>

<!--    <link rel="stylesheet" th:href="@{/static/assets/css/search.css}">-->
<style>
    .flag-icon {
        width: 20px;
        height: 15px;
        margin-right: 5px;
    }
</style>
</head>
<body>
<nav th:fragment="menu">

    <div class="nav-left">
        <img th:src="@{https://www.diracetechnology.com/wp-content/themes/dat/assets/images/DAT Logo.png}"  class="logo" style="height: 62px;width: auto">
<!--        <div class="search" style="margin-left:20px;">-->

<!--            <input type="search" id="searchInput" placeholder="Search" oninput="performSearch()">-->

<!--z-->
<!--        </div>-->

<!--        <div class="language-selector">-->
<!--&lt;!&ndash;            <label for="language">Choose language:</label>&ndash;&gt;-->
<!--            <select id="language">-->
<!--                <option value="en-US"><img src="https://media.istockphoto.com/id/537287287/vector/flag-of-japan.jpg?s=612x612&w=0&k=20&c=ib29xXdb3_UtWw0S0Md0Mvbzz1DmsAA6Q5FP1X_4WZQ=" class="flag-icon" > English</option>-->
<!--                <option value="ja-JP"><img src="https://media.istockphoto.com/id/537287287/vector/flag-of-japan.jpg?s=612x612&w=0&k=20&c=ib29xXdb3_UtWw0S0Md0Mvbzz1DmsAA6Q5FP1X_4WZQ=" class="flag-icon" > Japanese</option>-->
<!--                <option value="zh-CN"><img src="https://media.istockphoto.com/id/537287169/vector/flag-of-china.jpg?s=612x612&w=0&k=20&c=PZMieLTEfmwDg7hcnXR3uPfMEld5MOtZRBoVQqi9dZI=" class="flag-icon" > Chinese</option>-->
<!--                <option value="hi-IN"><img src="https://media.istockphoto.com/id/472317739/vector/flag-of-india.jpg?s=612x612&w=0&k=20&c=ejlQRX4C_Mb40wz1JQcB5vKYcOKlfRtry2W6UcX6mlo=" class="flag-icon" > Hindi</option>-->
<!--                <option value="my-MM"><img src="https://t3.ftcdn.net/jpg/01/08/88/60/240_F_108886024_0bql9hHGk8d9XhReRXNZyPs4oN6K4yKu.jpg" class="flag-icon" alt="Myanmar"> Burmese (Myanmar)</option>-->
<!--            </select>-->
<!--        </div>-->

<!--        <div class="search-bar-container">-->
<!--            <img src="https://cdn4.iconfinder.com/data/icons/evil-icons-user-interface/64/magnifier-256.png" alt="magnifier" class="magnifier"  />-->
<!--            <input type="search" class="input" placeholder="Search..."  id="searchInput"  oninput="performSearch()"/>-->
<!--            <img src="https://cdn1.iconfinder.com/data/icons/google-s-logo/150/Google_Icons-25-256.png" alt="mic-icon" class="mic-icon" />-->

<!--        </div>-->

        <div class="search-bar-container">
            <img src="https://cdn4.iconfinder.com/data/icons/evil-icons-user-interface/64/magnifier-256.png" alt="magnifier" class="magnifier" />
            <input type="search" class="input" placeholder="Search..." id="searchInput" oninput="performSearch()" />

            <div class="language-selector">
                <select id="language">
                    <option value="en-US">English</option>
                    <option value="ja-JP">Japanese</option>
                    <option value="zh-CN">Chinese</option>
                    <option value="hi-IN">Hindi</option>
                    <option value="my-MM">Burmese (Myanmar)</option>
                    <option value="es-ES">Spanish</option>
                    <option value="fr-FR">French</option>
                    <option value="de-DE">German</option>
                    <option value="ru-RU">Russian</option>
                    <option value="ar-SA">Arabic</option>
                    <option value="pt-PT">Portuguese</option>
                    <option value="bn-BD">Bengali</option>
                    <option value="ko-KR">Korean</option>
                    <option value="it-IT">Italian</option>
                    <option value="tr-TR">Turkish</option>
                    <option value="vi-VN">Vietnamese</option>
                    <option value="pl-PL">Polish</option>
                    <option value="th-TH">Thai</option>
                    <option value="nl-NL">Dutch</option>
                    <option value="sv-SE">Swedish</option>
                    <option value="da-DK">Danish</option>
                    <option value="fi-FI">Finnish</option>
                    <option value="no-NO">Norwegian</option>
                    <option value="el-GR">Greek</option>
                    <option value="he-IL">Hebrew</option>
                    <option value="hu-HU">Hungarian</option>
                    <option value="cs-CZ">Czech</option>
                    <option value="ro-RO">Romanian</option>
                    <option value="sk-SK">Slovak</option>
                    <option value="uk-UA">Ukrainian</option>
                    <option value="id-ID">Indonesian</option>
                </select>
            </div>

            <img src="https://cdn1.iconfinder.com/data/icons/google-s-logo/150/Google_Icons-25-256.png" alt="mic-icon" class="mic-icon" />
        </div>


        <ul id="searchResultsContainer"
            class="position-absolute  px-5  z-3" style="width:374px;overflow-y:scroll;height:210px;display:none;margin-top: 278px;
    margin-left: 173px;scrollbar-width: none;
    background-color: #efefef;box-shadow: 0 8px 16px rgb(77 83 94);"></ul>
    </div>



    <script th:src="@{/static/assets/js/search.js}"></script>



    <div class="nav-right">
        <div>
            <label class="switch">
                <input type="checkbox" id="notification-toggle">
                <span class="slider round"></span>
            </label>
            <span>Enable Notifications</span>
        </div>
        <div id="notification-icon" class="dropdown">
            <div id="notification-list-container">
                <a href="#" role="button" id="notification-dropdown" data-bs-toggle="dropdown" aria-expanded="false">
                    <i class="fa-solid fa-bell fa-xl mx-5" style="color:#2e6da4;"></i>
                    <span id="notification-count" class="badge bg-danger position-absolute top-0 end-0 rounded-circle" style="width: 20px; height: 20px; margin-top: -8px; margin-right: 20px;"></span>
                </a>
                <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="notification-dropdown" id="notification-list">
                    <!-- Notification messages will be displayed here -->
                </ul>
            </div>
        </div>

        <div class="nav-user online" >
            <a th:href="@{/logout}"><i class="fa-solid fa-right-from-bracket fa-xl" style="color: #369"></i></a>
        </div>
    </div>

    <!-- setting-menu -->

    <div class="setting-menu">

        <div class="inner-menu">
            <div class="post-row">
                <div class="user-profile">
                    <img src="">
                    <p>Jhon</p>
                    <a href="#" class="inner-link1">see your profile</a>
                </div>
            </div>
            <hr>
            <div class="post-row">
                <div class="user-profile">
                    <img src="">
                    <p>feedback</p>

                    <a href="#" class="inner-link2">Help us to improve your desgin</a>
                </div>
            </div>

            <hr>
            <div class="setting-links">
                <img src="" class="setting-icon">
                <a href="#">setting & Privacy <img src="" width="10px"></a>
            </div>
            <div class="setting-links">
                <img src="" class="setting-icon">
                <a href="#">Help & support <img src="" width="10px"></a>
            </div>
            <div class="setting-links">
                <img src="" class="setting-icon">
                <a href="#">Display & Accessibility <img src="" width="10px"></a>
            </div>
            <div class="setting-links">
                <img src="" class="setting-icon">
                <a href="#">Logout <img src="" width="10px"></a>
            </div>
        </div>

    </div>



<!--        <script>-->
<!--        const search = document.querySelector(".search-bar-container");-->
<!--        const magnifier = document.querySelector(".magnifier");-->
<!--        const micIcon = document.querySelector(".mic-icon");-->
<!--        const input1 = document.querySelector(".input"); // Add input variable declaration-->
<!--        const listItem = document.querySelector(".voice-text");-->
<!--        const recognition = new webkitSpeechRecognition() || SpeechRecognition();-->

<!--        magnifier.addEventListener("click", (e) => {-->
<!--            search.classList.toggle("active");-->
<!--            e.stopPropagation();-->
<!--        });-->

<!--        document.body.addEventListener("click", (e) => {-->
<!--            if (!search.contains(e.target)) {-->
<!--                search.classList.remove("active");-->
<!--                // Clear input text and hide result box when search bar is closed-->
<!--                input1.value = "";-->
<!--                document.getElementById("searchResultsContainer").style.display = "none";-->
<!--            }-->
<!--        });-->

<!--        micIcon.addEventListener("click", () => {-->
<!--            recognition.start();-->

<!--            recognition.onresult = (e) => {-->
<!--                const result = event.results[0][0].transcript.trim().replace(/\.$/, ''); // Remove trailing dot-->
<!--                console.log('Voice input:', result); // Log the voice input to the console-->
<!--                input1.value = result;-->

<!--                // Trigger the search when voice input is received-->
<!--                performSearch();-->
<!--            };-->

<!--            recognition.onerror = (event) => {-->
<!--                alert("Speech recognition error: " + event.error);-->
<!--            };-->
<!--        });-->
<!--    </script>-->


    <script>

        document.addEventListener('DOMContentLoaded', function() {
            const search = document.querySelector(".search-bar-container");
            const magnifier = document.querySelector(".magnifier");
            const micIcon = document.querySelector(".mic-icon");
            const input1 = document.querySelector(".input");
            const languageSelector = document.getElementById("language");
            const recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();

            magnifier.addEventListener("click", (e) => {
                search.classList.toggle("active");
                e.stopPropagation();
            });

            document.body.addEventListener("click", (e) => {
                if (!search.contains(e.target)) {
                    search.classList.remove("active");
                    input1.value = "";
                    document.getElementById("searchResultsContainer").style.display = "none";
                }
            });

            micIcon.addEventListener("click", () => {
                const selectedLanguage = languageSelector.value;
                recognition.lang = selectedLanguage;

                recognition.start();

                recognition.onresult = (e) => {
                    let result = e.results[0][0].transcript.trim();
                    // Remove trailing punctuation marks including Japanese full stop
                    result = result.replace(/[.,。、。।]$/, '').trim();
                    console.log('Voice input:', result); // Log the voice input to the console
                    input1.value = result;

                    // Trigger the search when voice input is received
                    performSearch();
                };

                recognition.onerror = (event) => {
                    alert("Speech recognition error: " + event.error);
                };
            });

        });

    </script>

</nav>
</body>
</html>